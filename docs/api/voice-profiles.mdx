---
title: "Voice Profiles API"
description: "Manage voice profiles programmatically"
---

## Endpoints

### List Profiles

```http
GET /profiles
```

**Response:**
```json
[
  {
    "id": "abc123",
    "name": "John Smith",
    "language": "en",
    "description": "Professional narrator",
    "created_at": "2024-01-29T12:00:00Z",
    "updated_at": "2024-01-29T12:00:00Z"
  }
]
```

### Get Profile

```http
GET /profiles/{id}
```

**Response:**
```json
{
  "id": "abc123",
  "name": "John Smith",
  "language": "en",
  "description": "Professional narrator",
  "created_at": "2024-01-29T12:00:00Z",
  "updated_at": "2024-01-29T12:00:00Z"
}
```

### Create Profile

```http
POST /profiles
```

**Request:**
```json
{
  "name": "John Smith",
  "language": "en",
  "description": "Professional narrator"
}
```

**Response:**
```json
{
  "id": "abc123",
  "name": "John Smith",
  "language": "en",
  "description": "Professional narrator",
  "created_at": "2024-01-29T12:00:00Z"
}
```

### Update Profile

```http
PUT /profiles/{id}
```

**Request:**
```json
{
  "name": "Updated Name",
  "description": "Updated description"
}
```

### Delete Profile

```http
DELETE /profiles/{id}
```

**Response:**
```json
{
  "success": true
}
```

### Add Voice Sample

```http
POST /profiles/{id}/samples
```

**Request:** (multipart/form-data)
```
file: <audio file>
reference_text: <exact transcript>
```

**Response:**
```json
{
  "id": "sample123",
  "profile_id": "abc123",
  "audio_path": "data/profiles/abc123/sample123.wav",
  "reference_text": "Hello world",
  "selection_start_ms": 500,
  "selection_end_ms": 15500,
  "source_duration_ms": 22200,
  "selection_metrics_json": "{\"rms\":0.08,\"silence_ratio\":0.1,\"clipping_ratio\":0.0}",
  "selection_fallback_reason": null,
  "selection_policy_version": "v1"
}
```

### Get Voice Clone Policy

```http
GET /voice-clone/policy
```

Returns effective backend policy so the UI and clients can match validation and messaging.

**Response:**
```json
{
  "hard_min_seconds": 2.0,
  "recommended_target_seconds": 15.0,
  "hard_max_seconds": 60.0,
  "capture_auto_stop_seconds": 29,
  "min_rms": 0.01,
  "max_silence_ratio": 0.45,
  "max_clipping_ratio": 0.02,
  "selection_step_seconds": 0.5,
  "policy_version": "v1"
}
```

## TypeScript Example

```typescript
import { VoiceboxClient } from '@/lib/api'

const client = new VoiceboxClient({
  baseUrl: 'http://localhost:17493'
})

// Create profile
const profile = await client.createProfile({
  name: 'John Smith',
  language: 'en',
  description: 'Professional narrator'
})

// Add sample
await client.addSample(profile.id, audioFile)

// List all profiles
const profiles = await client.listProfiles()
```

For full API documentation, visit `http://localhost:17493/docs` when the server is running.
